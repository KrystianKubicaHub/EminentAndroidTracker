
// Auto-generated, do not edit
package com.openreplay.models


enum ORMessageType: ULong {
<%= $messages.map { |msg| "    case #{msg.name.first_lower} = #{msg.id}" }.join "\n" %>
}
<% $messages.each do |msg| %>
class OR<%= msg.name.camel_case %>(
    <% msg.attributes[2..-1].each do |attr| %>
    val <%= attr.property %>: <%= attr.type_kotlin %>,
    <% end %>
) : ORMessage(ORMessageType.<%= msg.name.upcase_first %>) {

    constructor(genericMessage: GenericMessage) : this(
        <% if msg.attributes.length > 2 %>
        <% msg.attributes[2..-1].each do |attr| %>
        <%= attr.property %> = genericMessage.body.read<%= attr.type_kotlin_read %>(),
        <% end %>
        <% end %>
    ) {
        // Initialization logic if needed
    }

    init(<%= msg.attributes[2..-1].map { |attr| "#{attr.property}: #{attr.type_swift}" }.join ", " %>) {
<%= msg.attributes[2..-1].map { |attr| "        self.#{attr.property} = #{attr.property}" }.join "\n" %>
        super.init(messageType: .<%= "#{msg.name.first_lower}" %>)
    }

    override init?(genericMessage: GenericMessage) {
    <% if msg.attributes.length > 2 %>  do {
            var offset = 0
<%= msg.attributes[2..-1].map { |attr| "            self.#{attr.property} = try genericMessage.body.read#{attr.type_swift_read}(offset: &offset)" }.join "\n" %>
            super.init(genericMessage: genericMessage)
        } catch {
            return nil
        }
    <% else %>
        super.init(genericMessage: genericMessage)
    <% end %>}

    override func contentData() -> Data {
        return Data(values: ULong(<%= "#{msg.id}"%>), timestamp<% if msg.attributes.length > 2 %>, Data(values: <%= msg.attributes[2..-1].map { |attr| attr.property }.join ", "%>)<% end %>)
    }

    override var description: String {
        return "-->> <%= msg.name.to_s.camel_case %>(<%= "#{msg.id}"%>): timestamp:\(timestamp) <%= msg.attributes[2..-1].map { |attr| "#{attr.property}:\\(#{attr.property})" }.join " "%>";
    }
}
<% end %>
